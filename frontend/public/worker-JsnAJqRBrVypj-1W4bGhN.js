self.__WB_DISABLE_DEV_LOGS=!0,self.addEventListener("message",t=>{if(!t.data)return;const{command:n}=t.data;"SKIP_WAITING"===n&&self.skipWaiting()}),self.addEventListener("push",t=>{if(!t.data)return;let n={};try{n=t.data.json()}catch(e){n={title:"RentHub",body:t.data.text()}}const e=n.title||"RentHub",i={body:n.body||"You have a new notification",icon:"/icons/icon-192.png",badge:"/icons/icon-192.png",data:n.data||{},actions:n.actions||[]};t.waitUntil(self.registration.showNotification(e,i))}),self.addEventListener("notificationclick",t=>{var n;t.notification.close();const e=(null===(n=t.notification.data)||void 0===n?void 0:n.url)||"/";t.waitUntil((async()=>{try{fetch("/api/v1/analytics/pwa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"push_notification_clicked",url:e})})}catch(t){}const t=await clients.matchAll({includeUncontrolled:!0,type:"window"});for(const n of t)if(n.url===e&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow(e)})())}),self.addEventListener("fetch",t=>{const{request:n}=t;"GET"===n.method&&/\/api\/v1\/properties(\?|$)/.test(n.url)&&t.respondWith((async()=>{const t=await caches.open("properties-last");try{const e=await fetch(n);if(e.ok){const n=e.clone();t.put("latest",n)}return e}catch(n){const e=await t.match("latest");return e||new Response(JSON.stringify({data:[],meta:{offline:!0}}),{headers:{"Content-Type":"application/json"},status:200})}})())});